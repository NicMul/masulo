<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Touch Test - Masulo SDK</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .test-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .game-card {
            position: relative;
            width: 200px;
            height: 250px;
            margin: 20px auto;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid #ddd;
        }
        .game-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .test-info {
            margin-top: 20px;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 5px;
            border-left: 4px solid #2196F3;
        }
        .test-info h3 {
            margin-top: 0;
            color: #1976D2;
        }
        .test-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .test-info li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Mobile Touch Test</h1>
        <p>Test the mobile touch functionality of the Masulo SDK</p>
        
        <div data-masulo-game-id="test-game-1" data-masulo-tag="true" class="game-card">
            <img src="./images/cleo.jpg"Test Game" class="game-image">
            <button class="play-button">Play Now</button>
        </div>
        
        <div class="test-info">
            <h3>Test Instructions:</h3>
            <ul>
                <li><strong>Desktop:</strong> Hover over the game card to see video preview and play button</li>
                <li><strong>Mobile Touch:</strong> Touch the game card - video appears instantly</li>
                <li><strong>Mobile Scroll:</strong> Touch and drag to scroll - video appears briefly then disappears</li>
                <li><strong>Mobile Hold:</strong> Touch and hold without moving - video continues playing</li>
                <li><strong>Expected:</strong> No context menu should appear on long press</li>
                <li><strong>Expected:</strong> Video should not enter fullscreen mode</li>
                <li><strong>Expected:</strong> Scrolling should work smoothly without interference</li>
            </ul>
        </div>
        
        <div class="test-info">
            <h3>SDK Status:</h3>
            <p>Status: <span id="sdk-status">Loading...</span></p>
            <p>Connection: <span id="connection-status">Disconnected</span></p>
        </div>
    </div>

    <script src="../mesulo-sdk.js" data-application-key="5f61931c-187c-4341-8874-360d29907b00"></script>
    
    <script>
        function setupStatusUpdates() {
            if (window.masulo) {
                document.getElementById('sdk-status').textContent = 'Ready';
                document.getElementById('connection-status').textContent = 'Connected';
                
                window.masulo.on('connected', () => {
                    document.getElementById('connection-status').textContent = 'Connected';
                });
                
                window.masulo.on('disconnected', () => {
                    document.getElementById('connection-status').textContent = 'Disconnected';
                });
            } else {
                setTimeout(setupStatusUpdates, 100);
            }
        }
        
        setupStatusUpdates();
        
        // Add some debug logging
        document.addEventListener('DOMContentLoaded', function() {
            const gameCard = document.querySelector('.game-card');
            
            gameCard.addEventListener('touchstart', function(e) {
                console.log('Touch start detected - video should appear instantly');
            });
            
            gameCard.addEventListener('touchmove', function(e) {
                console.log('Touch move detected - checking for scroll');
            });
            
            gameCard.addEventListener('touchend', function(e) {
                console.log('Touch end detected');
            });
            
            gameCard.addEventListener('contextmenu', function(e) {
                console.log('Context menu prevented');
            });
        });
    </script>
</body>
</html>
